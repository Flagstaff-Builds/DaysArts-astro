---
import type { CollectionEntry } from 'astro:content';
import { Image } from 'astro:assets';
import { format } from "date-fns";
import { CalendarDaysIcon, ClockIcon } from '@heroicons/vue/24/outline';

type Props = {
  event: CollectionEntry<'event'>;
};

const { event } = Astro.props;

// Format the date as UTC
const eventDate = new Date(event.data.date + 'T00:00:00Z');
const formattedDate = eventDate.toLocaleDateString('en-US', {
  timeZone: 'UTC',
  weekday: 'long',
  month: 'short',
  day: '2-digit'
});


---

{!event.data.past && (
<li>
  <a href={`/event/${event.slug}`} class="block text-zinc-900">
    {event.data.poster && (
      <Image
        src={event.data.poster}
        format="avif"
        quality="mid"
        width={800}
        height={450 / 1.5}
        alt={`${event.data.title} thumbnail`}
        class="aspect-[3/3] w-full rounded-xl bg-gray-900/5 object-cover shadow-lg"
      />
    )}
    <h3 class="mt-6 text-xl font-semibold leading-8 text-gray-900">{event.data.title}</h3>
    <p class="flex items-center text-base leading-7 text-gray-700">
      <CalendarDaysIcon class="mr-1 h-4 w-4 text-purple-600" aria-hidden="true" /> {formattedDate}
    </p>
    <p class="flex items-center text-base leading-7 text-gray-700">
      <ClockIcon class="mr-1 h-4 w-4 text-purple-600" aria-hidden="true" /> {event.data.time}
    </p>
    <!-- <p class="mt-4 text-base leading-7 text-gray-600">{event.data.description}.</p> -->

    <!-- Sponsors -->
    <div class="mt-4">
      <h2 class="text-sm font-bold text-gray-500 uppercase">Sponsors:</h2>
      <ul class="">
        <li>
          <span class="text-xs font-medium uppercase text-slate-500">Concert</span>
          <span aria-hidden="true" class="mx-4 text-sm text-gray-400">·</span>
          {event.data.concertSponsor?.map((sponsor) => (
            <span class="text-sm font-medium text-gray-400">{sponsor}</span>
          ))}
        </li>
        <!-- <div aria-hidden="true" class="mx-4 text-sm text-gray-400">·</div> -->
        <li>
          <span class="text-xs font-medium uppercase text-slate-500">Reception</span>
          <span aria-hidden="true" class="mx-4 text-sm text-gray-400">·</span>
          {event.data.receptionSponsor?.map((sponsor) => (
            <span class="text-sm font-medium text-gray-400">{sponsor}</span>
          ))}
        </li>
      </ul>
    </div>
  </a>
</li>
)}
<!--

  <h2 class="text-2xl font-bold">
    <a href={`/event/${event.slug}`} class="text-zinc-900">{event.data.title}</a>
  </h2>
  <p class="text-sm text-gray-600">{event.data.time} on {event.data.date}</p>
  <p class="text-sm text-gray-600">{event.data.description}</p>
  <div>
    how does this work?
    {event.data.entertainment?.map(entertainmentI => (

      <span class="inline-block bg-gray-200 rounded-sm px-3 py-1 text-xs text-gray-700 mr-2 mb-2">
        {entertainmentI}
      </span>
    ))}

  </div> -->
